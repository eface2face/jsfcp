/*
 * JsFCP v0.1.16
 * JavaScript BFCP client implementation using WebSocket as transport and JSON as message format
 * Copyright 2013-2015 eFace2Face, inc. All Rights Reserved
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.JsFCP=e()}}(function(){return function e(t,_,r){function n(s,T){if(!_[s]){if(!t[s]){var i="function"==typeof require&&require;if(!T&&i)return i(s,!0);if(o)return o(s,!0);var A=new Error("Cannot find module '"+s+"'");throw A.code="MODULE_NOT_FOUND",A}var R=_[s]={exports:{}};t[s][0].call(R.exports,function(e){var _=t[s][1][e];return n(_?_:e)},R,R.exports,e,t,_,r)}return _[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,_){t.exports={InvalidMessageFormatPrimitive:function(){var e=function(e){this.code=101,this.name="INVALID_MESSAGE_FORMAT_PRIMITIVE",this.message=" Message format error. Primitive doesn't exist. "+e};return e.prototype=new Error,e}(),InvalidMessageFormat:function(){var e=function(e){this.code=102,this.name="INVALID_MESSAGE_FORMAT",this.message=e};return e.prototype=new Error,e}(),InvalidHeaderFormat:function(){var e=function(e){this.code=103,this.name="INVALID_HEADER_FORMAT",this.message=e};return e.prototype=new Error,e}(),NoWebSocketException:function(){var e=function(){this.code=200,this.name="NO_WEBSOCKET_EXCEPTION",this.message="There is no WebSocket available"};return e.prototype=new Error,e}()}},{}],2:[function(e,t,_){function r(e){s.call(this),this.arrayFloorIds=e}t.exports=r;var n=e("debug")("JsFCP:FloorQuery"),o=e("util"),s=e("events").EventEmitter,T=e("./MessageFactory");o.inherits(r,s),r.prototype.onMessageReceived=function(e){if(e[T.C.HD_PRIMITIVE]===T.C.PRI_FL_STATUS_NAM){var t=e[T.C.HD_ATTRIBUTES],_=t[T.C.ATT_FL_ID_NAM];if(t[T.C.ATT_FLOOR_REQUEST_INFORMATION_NAM]){var r,o,s;for(r=t[T.C.ATT_FLOOR_REQUEST_INFORMATION_NAM].length,o=0;r>o;o++)if(s=t[T.C.ATT_FLOOR_REQUEST_INFORMATION_NAM][o],s[T.C.ATT_OVERALL_REQUEST_STATUS_NAM]){var i=s[T.C.ATT_FL_REQUEST_ID_NAM],A=s[T.C.ATT_OVERALL_REQUEST_STATUS_NAM][T.C.ATT_REQUEST_STATUS_NAM];if(A&&A[T.C.ATT_REQUEST_STATUS_VALUE_NAM]){var R=A[T.C.ATT_REQUEST_STATUS_VALUE_NAM];if(s[T.C.ATT_BENEFICIARY_INFORMATION_NAM]){var a=s[T.C.ATT_BENEFICIARY_INFORMATION_NAM][T.C.ATT_BENEFICIARY_ID_NAM];R===T.C.RS_GRANTED_NAM?this.emit("floorGranted",{floorId:_,beneficiaryId:a,floorRequestId:i}):(R===T.C.RS_RELEASED_NAM||R===T.C.RS_REVOKED_NAM)&&this.emit("floorReleased",{floorId:_,beneficiaryId:a,floorRequestId:i})}}}}}else n("onMessageReceived(): FloorStatus was expected");return null},r.prototype.onErrorReceived=function(e){n("onErrorReceived(): "+e)}},{"./MessageFactory":6,debug:14,events:9,util:13}],3:[function(e,t,_){function r(e,t,_){this.beneficiaryId=_,this.floorRequestId=t,this.onError=e.error}t.exports=r;var n=e("debug")("JsFCP:FloorRelease"),o=e("./MessageFactory");r.prototype.onMessageReceived=function(e){n("onMessageReceived(): this function shouldn't be called, but was called with: "+e)},r.prototype.onErrorReceived=function(e){n("onErrorReceived(): ",e);var t=e[o.C.HD_ATTRIBUTES][o.C.ATT_ERROR_CODE_NAM],_=e[o.C.HD_ATTRIBUTES][o.C.ATT_ERROR_INFO_NAM];void 0!==this.onError&&this.onError({errorCode:t,errorInfo:_})}},{"./MessageFactory":6,debug:14}],4:[function(e,t,_){function r(e,t){this.beneficiaryId=t,this.queuePosition=null,this.status=null,this.floorRequestId=null,this.statusInfo=null,this.onPending=e.pending,this.onAccepted=e.accepted,this.onGranted=e.granted,this.onDenied=e.denied,this.onCancelled=e.cancelled,this.onReleased=e.released,this.onRevoked=e.revoked,this.onError=e.error}function n(e,t){return null===e?!1:null===t?!0:t===e?!1:e===s.C.RS_GRANTED_NAM||e===s.C.RS_DENIED_NAM||e===s.C.RS_CANCELLED_NAM||e===s.C.RS_RELEASED_NAM||e===s.C.RS_REVOKED_NAM?!0:t===s.C.RS_GRANTED_NAM?!1:t===s.C.RS_PENDING_NAM&&e===s.C.RS_ACCEPTED_NAM?!0:t===s.C.RS_ACCEPTED_NAM?!1:void 0}t.exports=r;var o=e("debug")("JsFCP:FloorRequest"),s=e("./MessageFactory");r.prototype.onMessageReceived=function(e){if(e[s.C.HD_PRIMITIVE]===s.C.PRI_FL_REQUEST_STATUS_NAM){var t=e[s.C.HD_ATTRIBUTES][s.C.ATT_FLOOR_REQUEST_INFORMATION_NAM],_=e[s.C.HD_ATTRIBUTES][s.C.ATT_STATUS_INFO_NAM];if(t[s.C.ATT_OVERALL_REQUEST_STATUS_NAM]){var r=t[s.C.ATT_OVERALL_REQUEST_STATUS_NAM][s.C.ATT_REQUEST_STATUS_NAM];if(r){var T=r[s.C.ATT_REQUEST_STATUS_VALUE_NAM];if(T&&n(T,this.status)){if(_&&(this.statusInfo=_),this.status=r[s.C.ATT_REQUEST_STATUS_VALUE_NAM],r[s.C.ATT_QUEUE_POSITION_NAM]&&(this.queuePosition=r[s.C.ATT_QUEUE_POSITION_NAM]),this.floorRequestId=t[s.C.ATT_FL_REQUEST_ID_NAM],this.status===s.C.RS_PENDING_NAM)return o("onMessageReceived(): onPending ",this.floorRequestId),this.onPending(this),!0;if(this.status===s.C.RS_ACCEPTED_NAM)return o("onMessageReceived(): onAccepted ",this.floorRequestId),this.onAccepted(this),!0;if(this.status===s.C.RS_GRANTED_NAM)return o("onMessageReceived(): onGranted ",this.floorRequestId),this.onGranted(this),!0;if(this.status===s.C.RS_DENIED_NAM)return o("onMessageReceived(): onDenied ",this.floorRequestId),this.onDenied(),!1;if(this.status===s.C.RS_CANCELLED_NAM)return o("onMessageReceived(): onCancelled ",this.floorRequestId),this.onCancelled(),!1;if(this.status===s.C.RS_RELEASED_NAM)return o("onMessageReceived(): onReleased ",this.floorRequestId),this.onReleased(),!1;if(this.status===s.C.RS_REVOKED_NAM)return o("onMessageReceived(): onRevoked ",this.floorRequestId),this.onRevoked(),!1}}}}else o("onMessageReceived(): FloorRequestStatus was expected");return null},r.prototype.onErrorReceived=function(e){o("onErrorReceived(): "+e);var t=e[s.C.HD_ATTRIBUTES][s.C.ATT_ERROR_CODE_NAM],_=e[s.C.HD_ATTRIBUTES][s.C.ATT_ERROR_INFO_NAM];void 0!==this.onError&&this.onError({errorCode:t,errorInfo:_})}},{"./MessageFactory":6,debug:14}],5:[function(e,t,_){var r={Participant:e("./Participant"),Exceptions:e("./Exceptions"),debug:e("debug")};t.exports=r},{"./Exceptions":1,"./Participant":7,debug:14}],6:[function(e,t,_){function r(e,t){this.conferenceId=t,this.userId=e}function n(e,t,_){var r,E,c,I=[],u=_;if(T(e)&&(I=s(t),c=u.length,u=o(I,M[e],u),u.length!==c))return u;switch(e){case N.ATT_PRIORITY_NAM:i(t)||(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_PRIORITY_NAM+', "'+t+'" is not a valid value',a(E),u.push(E));break;case N.ATT_REQUEST_STATUS_NAM:var l=t[N.ATT_REQUEST_STATUS_VALUE_NAM];l&&"undefined"!==l||(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_REQUEST_STATUS_NAM+", "+N.ATT_REQUEST_STATUS_VALUE_NAM+" was found",a(E),u.push(E)),A(l)||(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_REQUEST_STATUS_NAM+', "'+l+'" is not a valid value',a(E),u.push(E));break;case N.ATT_ERROR_CODE_NAM:R(t)||(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_ERROR_CODE_NAM+', "'+t+'" is not a valid value for attribute '+N.ATT_ERROR_CODE_NAM,a(E),u.push(E));break;case N.ATT_FLOOR_REQUEST_INFORMATION_NAM:r=I.indexOf(N.ATT_FL_REQUEST_ID_NAM),0>r&&(E="checkJsfcpAttributeFormat(): Attribute "+N.ATT_FLOOR_REQUEST_INFORMATION_NAM+", no "+N.ATT_FL_REQUEST_ID_NAM+" was found",a(E),u.push(E)),I.indexOf(N.ATT_FL_REQUEST_STATUS_NAM)<0?(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_FLOOR_REQUEST_INFORMATION_NAM+", no "+N.ATT_FL_REQUEST_STATUS_NAM+" was found",a(E),u.push(E)):t[N.ATT_FL_REQUEST_STATUS_NAM]instanceof Array||(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_FLOOR_REQUEST_INFORMATION_NAM+", "+N.ATT_FL_REQUEST_STATUS_NAM+" should be an array",a(E),u.push(E));break;case N.ATT_OVERALL_REQUEST_STATUS_NAM:r=I.indexOf(N.ATT_FL_REQUEST_ID_NAM),0>r&&(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_OVERALL_REQUEST_STATUS_NAM+", no "+N.ATT_FL_REQUEST_ID_NAM+" was found",a(E),u.push(E));break;case N.ATT_FL_REQUEST_STATUS_NAM:r=I.indexOf(N.ATT_FL_ID_NAM),0>r&&(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_FL_REQUEST_STATUS_NAM+", no "+N.ATT_FL_ID_NAM+" was found",a(E),u.push(E));break;case N.ATT_BENEFICIARY_INFORMATION_NAM:r=I.indexOf(N.ATT_BENEFICIARY_ID_NAM),0>r&&(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_BENEFICIARY_INFORMATION_NAM+", no "+N.ATT_BENEFICIARY_ID_NAM+" was found",a(E),u.push(E));break;case N.ATT_REQUESTED_BY_INFORMATION_NAM:r=I.indexOf(N.ATT_REQUESTED_BY_ID_NAM),0>r&&(E="checkJsfcpAttributeFormat(): attribute "+N.ATT_REQUESTED_BY_INFORMATION_NAM+", no "+N.ATT_REQUESTED_BY_ID_NAM+" was found",a(E),u.push(E))}return c=u.length,I.forEach(function(e){if(T(e)||e===N.ATT_PRIORITY_NAM)if(t[e]instanceof Array)for(var _=t[e].length,r=0;_>r;r++)u=n(e,t[e][r],u);else if(u=n(e,t[e],u),u.length!==c)return u}),u}function o(e,t,_){for(var r,n=e.length,o=_,s=0;n>s;s++){var T=t.indexOf(e[s]);0>T&&(r="checkValidAttributes(): attribute list ["+e+"], invalid attribute list because of ["+e[s]+"]",a(r),o.push(r))}return o}function s(e){var t=[];for(var _ in e)t.push(_);return t}function T(e){return M[e]?!0:!1}function i(e){return I.indexOf(e)>=0?!0:!1}function A(e){return u.indexOf(e)>=0?!0:!1}function R(e){return l.indexOf(e)>=0?!0:!1}t.exports=r;var a=e("debug")("JsFCP:MessageFactory"),E=e("./Exceptions"),N={CNF_OPTIONAL:"optional",CNF_MULTI:"multiple",HD_VER:"ver",HD_VER_1:1,HD_PRIMITIVE:"primitive",HD_CONFERENCE_ID:"conferenceId",HD_TRANSACTION_ID:"transactionId",HD_USER_ID:"userId",HD_HEADER:"header",HD_ATTRIBUTES:"attributes",PRI_FL_REQUEST_NAM:"FloorRequest",PRI_FL_REQUEST_VAL:1,PRI_FL_RELEASE_NAM:"FloorRelease",PRI_FL_RELEASE_VAL:2,PRI_FL_REQUEST_QUERY_NAM:"FloorRequestQuery",PRI_FL_REQUEST_QUERY_VAL:3,PRI_FL_REQUEST_STATUS_NAM:"FloorRequestStatus",PRI_FL_REQUEST_STATUS_VAL:4,PRI_FL_USER_QUERY_NAM:"UserQuery",PRI_FL_USER_QUERY_VAL:5,PRI_FL_USER_STATUS_NAM:"UserStatus",PRI_FL_USER_STATUS_VAL:6,PRI_FL_QUERY_NAM:"FloorQuery",PRI_FL_QUERY_VAL:7,PRI_FL_STATUS_NAM:"FloorStatus",PRI_FL_STATUS_VAL:8,PRI_CH_ACTION_NAM:"ChairAction",PRI_CH_ACTION_VAL:9,PRI_CH_ACTION_ACK_NAM:"ChairActionAck",PRI_CH_ACTION_ACK_VAL:10,PRI_HELLO_NAM:"Hello",PRI_HELLO_VAL:11,PRI_HELLO_ACK_NAM:"HelloAck",PRI_HELLO_ACK_VAL:12,PRI_ERROR_NAM:"Error",PRI_ERROR_VAL:13,ATT_BENEFICIARY_ID_NAM:"beneficiaryId",ATT_BENEFICIARY_ID_VAL:1,ATT_FL_ID_NAM:"floorId",ATT_FL_ID_VAL:2,ATT_FL_REQUEST_ID_NAM:"floorRequestId",ATT_FL_REQUEST_ID_VAL:3,ATT_PRIORITY_NAM:"priority",ATT_PRIORITY_VAL:4,ATT_REQUEST_STATUS_NAM:"requestStatus",ATT_REQUEST_STATUS_VAL:5,ATT_ERROR_CODE_NAM:"errorCode",ATT_ERROR_CODE_VAL:6,ATT_ERROR_INFO_NAM:"errorInfo",ATT_ERROR_INFO_VAL:7,ATT_PARTICIPANT_PROVIDED_INFO_NAM:"participantProvidedInfo",ATT_PARTICIPANT_PROVIDED_INFO_VAL:8,ATT_STATUS_INFO_NAM:"statusInfo",ATT_STATUS_INFO_VAL:9,ATT_SUPPORTED_ATTRIBUTES_NAM:"supportedAttributes",ATT_SUPPORTED_ATTRIBUTES_VAL:10,ATT_SUPPORTED_PRIMITIVES_NAM:"supportedPrimitives",ATT_SUPPORTED_PRIMITIVES_VAL:11,ATT_USER_DISPLAY_NAME_NAM:"userDisplayName",ATT_USER_DISPLAY_NAME_VAL:12,ATT_USER_URI_NAM:"userUri",ATT_USER_URI_VAL:13,ATT_BENEFICIARY_INFORMATION_NAM:"beneficiaryInformation",ATT_BENEFICIARY_INFORMATION_VAL:14,ATT_FLOOR_REQUEST_INFORMATION_NAM:"floorRequestInformation",ATT_FLOOR_REQUEST_INFORMATION_VAL:15,ATT_REQUESTED_BY_INFORMATION_NAM:"requestedByInformation",ATT_REQUESTED_BY_INFORMATION_VAL:16,ATT_FL_REQUEST_STATUS_NAM:"floorRequestStatus",ATT_FL_REQUEST_STATUS_VAL:17,ATT_OVERALL_REQUEST_STATUS_NAM:"overallRequestStatus",ATT_OVERALL_REQUEST_STATUS_VAL:18,ATT_REQUESTED_BY_ID_NAM:"requestedById",ATT_REQUESTED_BY_ID_VAL:19,ATT_EXTENSION_ATTRIBUTE_NAM:"extensionAttribute",ATT_EXTENSION_ATTRIBUTE_VAL:20,ATT_REQUEST_STATUS_VALUE_NAM:"status",ATT_REQUEST_STATUS_VALUE_VAL:21,ATT_QUEUE_POSITION_NAM:"queuePosition",ATT_QUEUE_POSITION_VAL:22,ATT_SUPPORTED_FLOORTYPES_NAM:"supportedFloorTypes",ATT_SUPPORTED_FLOORTYPES_VAL:23,PR_LOWEST_NAM:"Lowest",PR_LOWEST_VAL:0,PR_LOW_NAM:"Low",PR_LOW_VAL:1,PR_NORMAL_NAM:"Normal",PR_NORMAL_VAL:2,PR_HIGH_NAM:"High",PR_HIGH_VAL:3,PR_HIGHEST_NAM:"Highest",PR_HIGHEST_VAL:4,RS_PENDING_NAM:"Pending",RS_PENDING_VAL:1,RS_ACCEPTED_NAM:"Accepted",RS_ACCEPTED_VAL:2,RS_GRANTED_NAM:"Granted",RS_GRANTED_VAL:3,RS_DENIED_NAM:"Denied",RS_DENIED_VAL:4,RS_CANCELLED_NAM:"Cancelled",RS_CANCELLED_VAL:5,RS_RELEASED_NAM:"Released",RS_RELEASED_VAL:6,RS_REVOKED_NAM:"Revoked",RS_REVOKED_VAL:7,ERR_NO_CONF_NAM:"ErrorConferenceDoesNotExist",ERR_NO_CONF_VAL:1,ERR_NO_USER_NAM:"UserDoesNotExist",ERR_NO_USER_VAL:2,ERR_UNK_PR_NAM:"UnknownPrimitive",ERR_UNK_PR_VAL:3,ERR_UNK_ATT_NAM:"UnknownMandatoryAttribute",ERR_UNK_ATT_VAL:4,ERR_UNAUTH_OP_NAM:"UnauthorizedOperation",ERR_UNAUTH_OP_VAL:5,ERR_INV_FL_ID_NAM:"InvalidFloorId",ERR_INV_FL_ID_VAL:6,ERR_NO_FL_RQ_ID_NAM:"FloorRequestIdDoesNotExist",ERR_NO_FL_RQ_ID_VAL:7,ERR_MAX_FL_RQ_NAM:"FloorRequestMaxNumberReached",ERR_MAX_FL_RQ_VAL:8,ERR_TLS_NAM:"UseTls",ERR_TLS_VAL:9};r.C=N;var c=[N.PRI_FL_REQUEST_NAM,N.PRI_FL_RELEASE_NAM,N.PRI_FL_REQUEST_QUERY_NAM,N.PRI_FL_REQUEST_STATUS_NAM,N.PRI_FL_USER_QUERY_NAM,N.PRI_FL_USER_STATUS_NAM,N.PRI_FL_QUERY_NAM,N.PRI_FL_STATUS_NAM,N.PRI_CH_ACTION_NAM,N.PRI_CH_ACTION_ACK_NAM,N.PRI_HELLO_NAM,N.PRI_HELLO_ACK_NAM,N.PRI_ERROR_NAM],I=[N.PR_LOWEST_NAM,N.PR_LOW_NAM,N.PR_NORMAL_NAM,N.PR_HIGH_NAM,N.PR_HIGHEST_NAM],u=[N.RS_PENDING_NAM,N.RS_ACCEPTED_NAM,N.RS_GRANTED_NAM,N.RS_DENIED_NAM,N.RS_CANCELLED_NAM,N.RS_RELEASED_NAM,N.RS_REVOKED_NAM],l=[N.ERR_NO_CONF_NAM,N.ERR_NO_USER_NAM,N.ERR_UNK_PR_NAM,N.ERR_UNK_ATT_NAM,N.ERR_UNAUTH_OP_NAM,N.ERR_INV_FL_ID_NAM,N.ERR_NO_FL_RQ_ID_NAM,N.ERR_MAX_FL_RQ_NAM,N.ERR_TLS_NAM],M={};M[N.ATT_BENEFICIARY_INFORMATION_NAM]=[N.ATT_BENEFICIARY_ID_NAM,N.ATT_USER_DISPLAY_NAME_NAM,N.ATT_USER_URI_NAM,N.ATT_EXTENSION_ATTRIBUTE_NAM],M[N.ATT_FLOOR_REQUEST_INFORMATION_NAM]=[N.ATT_FL_REQUEST_ID_NAM,N.ATT_OVERALL_REQUEST_STATUS_NAM,N.ATT_FL_REQUEST_STATUS_NAM,N.ATT_BENEFICIARY_INFORMATION_NAM,N.ATT_REQUESTED_BY_INFORMATION_NAM,N.ATT_PRIORITY_NAM,N.ATT_PARTICIPANT_PROVIDED_INFO_NAM,N.ATT_EXTENSION_ATTRIBUTE_NAM],M[N.ATT_REQUESTED_BY_INFORMATION_NAM]=[N.ATT_REQUESTED_BY_ID_NAM,N.ATT_USER_DISPLAY_NAME_NAM,N.ATT_USER_URI_NAM,N.ATT_EXTENSION_ATTRIBUTE_NAM],M[N.ATT_FL_REQUEST_STATUS_NAM]=[N.ATT_FL_ID_NAM,N.ATT_REQUEST_STATUS_NAM,N.ATT_STATUS_INFO_NAM,N.ATT_EXTENSION_ATTRIBUTE_NAM],M[N.ATT_OVERALL_REQUEST_STATUS_NAM]=[N.ATT_FL_REQUEST_ID_NAM,N.ATT_REQUEST_STATUS_NAM,N.ATT_STATUS_INFO_NAM,N.ATT_EXTENSION_ATTRIBUTE_NAM],M[N.ATT_REQUEST_STATUS_NAM]=[N.ATT_REQUEST_STATUS_VALUE_NAM,N.ATT_QUEUE_POSITION_NAM];var f=[N.HD_VER,N.HD_PRIMITIVE,N.HD_CONFERENCE_ID,N.HD_TRANSACTION_ID,N.HD_USER_ID,N.HD_ATTRIBUTES],S={};S[N.PRI_FL_REQUEST_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_FL_ID_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_FL_ID_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_FL_ID_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_BENEFICIARY_ID_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_BENEFICIARY_ID_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_BENEFICIARY_ID_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_PARTICIPANT_PROVIDED_INFO_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_PARTICIPANT_PROVIDED_INFO_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_PARTICIPANT_PROVIDED_INFO_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_PRIORITY_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_PRIORITY_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_PRIORITY_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_REQUEST_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_FL_ID_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_FL_ID_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_FL_ID_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_BENEFICIARY_ID_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_BENEFICIARY_ID_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_BENEFICIARY_ID_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_PARTICIPANT_PROVIDED_INFO_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_PARTICIPANT_PROVIDED_INFO_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_PARTICIPANT_PROVIDED_INFO_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_PRIORITY_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_PRIORITY_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_PRIORITY_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_REQUEST_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_RELEASE_NAM]={},S[N.PRI_FL_RELEASE_NAM][N.ATT_FL_REQUEST_ID_NAM]={},S[N.PRI_FL_RELEASE_NAM][N.ATT_FL_REQUEST_ID_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_RELEASE_NAM][N.ATT_FL_REQUEST_ID_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_RELEASE_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_RELEASE_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_RELEASE_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_REQUEST_QUERY_NAM]={},S[N.PRI_FL_REQUEST_QUERY_NAM][N.ATT_FL_REQUEST_ID_NAM]={},S[N.PRI_FL_REQUEST_QUERY_NAM][N.ATT_FL_REQUEST_ID_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_REQUEST_QUERY_NAM][N.ATT_FL_REQUEST_ID_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_REQUEST_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_REQUEST_STATUS_NAM]={},S[N.PRI_FL_REQUEST_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM]={},S[N.PRI_FL_REQUEST_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_REQUEST_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_REQUEST_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_REQUEST_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_REQUEST_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_USER_QUERY_NAM]={},S[N.PRI_FL_USER_QUERY_NAM][N.ATT_BENEFICIARY_ID_NAM]={},S[N.PRI_FL_USER_QUERY_NAM][N.ATT_BENEFICIARY_ID_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_USER_QUERY_NAM][N.ATT_BENEFICIARY_ID_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_USER_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_USER_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_USER_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_USER_STATUS_NAM]={},S[N.PRI_FL_USER_STATUS_NAM][N.ATT_BENEFICIARY_INFORMATION_NAM]={},S[N.PRI_FL_USER_STATUS_NAM][N.ATT_BENEFICIARY_INFORMATION_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_USER_STATUS_NAM][N.ATT_BENEFICIARY_INFORMATION_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_USER_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM]={},S[N.PRI_FL_USER_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_USER_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_USER_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_USER_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_USER_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_QUERY_NAM]={},S[N.PRI_FL_QUERY_NAM][N.ATT_FL_ID_NAM]={},S[N.PRI_FL_QUERY_NAM][N.ATT_FL_ID_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_QUERY_NAM][N.ATT_FL_ID_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_QUERY_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_STATUS_NAM]={},S[N.PRI_FL_STATUS_NAM][N.ATT_FL_ID_NAM]={},S[N.PRI_FL_STATUS_NAM][N.ATT_FL_ID_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_FL_STATUS_NAM][N.ATT_FL_ID_NAM][N.CNF_MULTI]=0,S[N.PRI_FL_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM]={},S[N.PRI_FL_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_STATUS_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_MULTI]=1,S[N.PRI_FL_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_FL_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_FL_STATUS_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_CH_ACTION_NAM]={},S[N.PRI_CH_ACTION_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM]={},S[N.PRI_CH_ACTION_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_CH_ACTION_NAM][N.ATT_FLOOR_REQUEST_INFORMATION_NAM][N.CNF_MULTI]=0,S[N.PRI_HELLO_NAM]={},S[N.PRI_HELLO_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_HELLO_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_HELLO_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_CH_ACTION_ACK_NAM]={},S[N.PRI_CH_ACTION_ACK_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_CH_ACTION_ACK_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_CH_ACTION_ACK_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_HELLO_NAM]={},S[N.PRI_HELLO_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_HELLO_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_HELLO_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_HELLO_ACK_NAM]={},S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_PRIMITIVES_NAM]={},S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_PRIMITIVES_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_PRIMITIVES_NAM][N.CNF_MULTI]=1,S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_ATTRIBUTES_NAM]={},S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_ATTRIBUTES_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_ATTRIBUTES_NAM][N.CNF_MULTI]=1,S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_FLOORTYPES_NAM]={},S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_FLOORTYPES_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_HELLO_ACK_NAM][N.ATT_SUPPORTED_FLOORTYPES_NAM][N.CNF_MULTI]=1,S[N.PRI_HELLO_ACK_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_HELLO_ACK_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_HELLO_ACK_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,S[N.PRI_ERROR_NAM]={},S[N.PRI_ERROR_NAM][N.ATT_ERROR_CODE_NAM]={},S[N.PRI_ERROR_NAM][N.ATT_ERROR_CODE_NAM][N.CNF_OPTIONAL]=0,S[N.PRI_ERROR_NAM][N.ATT_ERROR_CODE_NAM][N.CNF_MULTI]=0,S[N.PRI_ERROR_NAM][N.ATT_ERROR_INFO_NAM]={},S[N.PRI_ERROR_NAM][N.ATT_ERROR_INFO_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_ERROR_NAM][N.ATT_ERROR_INFO_NAM][N.CNF_MULTI]=0,S[N.PRI_ERROR_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM]={},S[N.PRI_ERROR_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_OPTIONAL]=1,S[N.PRI_ERROR_NAM][N.ATT_EXTENSION_ATTRIBUTE_NAM][N.CNF_MULTI]=1,r.prototype.getPriorityValues=function(){return I},r.prototype.getStatusValues=function(){return u},r.prototype.validatePacket=function(e){try{return this.isValidHeaderFormat(e),this.checkValidMessageFormat(e),e}catch(t){throw a("validatePacket(): invalid message format: "+JSON.stringify(e)),t}},r.prototype.createHeader=function(e,t){var _={};return _[N.HD_VER]=N.HD_VER_1,_[N.HD_PRIMITIVE]=e,_[N.HD_TRANSACTION_ID]=t,_[N.HD_CONFERENCE_ID]=this.conferenceId,_[N.HD_USER_ID]=this.userId,_[N.HD_ATTRIBUTES]={},_},r.prototype.isMine=function(e){return e[N.HD_USER_ID]===this.userId&&e[N.HD_CONFERENCE_ID]===this.conferenceId},r.prototype.isValidHeaderFormat=function(e){var t,_,r,n;for(n=Object.keys(e).length,r=0;n>r;r++)if(t=f[r],void 0===e[t])throw _="isValidHeaderFormat(): "+t+" was not founded in header: "+JSON.stringify(e),a(_),new E.InvalidHeaderFormat(_);return!0},r.prototype.checkValidMessageFormat=function(e){var t,_,r,o,s=[],T=e[N.HD_PRIMITIVE],i=JSON.stringify(e);if(c.indexOf(T)<0)throw o='checkValidMessageFormat(): message format error, primitive "'+T+"\" doesn't belong to primitives list: "+i,a(o),new E.InvalidMessageFormatPrimitive(o);var A=S[T];t=e[N.HD_ATTRIBUTES];for(var R in A)A[R][N.CNF_OPTIONAL]||t[R]||(o="checkValidMessageFormat(): message format error, no attribute "+R+": "+JSON.stringify(e),a(o),s.push(o));for(R in t)if(f.indexOf(R)<0)if(A[R])if(_=t[R],_ instanceof Array)if(A[R][N.CNF_MULTI])for(var I=_.length,u=0;I>u;u++)r=_[u],s=n(R,r,s);else o="checkValidMessageFormat(): message format error, value of "+R+" doesn't fit with the format for "+T+"(value type shouldn't be an array): "+JSON.stringify(e),a(o),s.push(o);else A[R][N.CNF_MULTI]?(o="checkValidMessageFormat(): message format error, value of "+R+" doesn't fit with the format for "+T+"(value type should be an array): "+JSON.stringify(e),a(o),s.push(o)):s=n(R,_,s);else o="checkValidMessageFormat(): message format error, attribute "+R+" doesn't belong to "+T+" specification: "+JSON.stringify(e),a(o),s.push(o);o="checkValidMessageFormat(): these errors were founded in JSON message: "+i;for(var l=0;l<s.length;l++)o+="\n- "+s[l];if(l>0)throw a(o),new E.InvalidMessageFormat(o);return!0},r.prototype.createRequestFloor=function(e,t,_,r,n){var o=this.createHeader(N.PRI_FL_REQUEST_NAM,e);return o[N.HD_ATTRIBUTES][N.ATT_FL_ID_NAM]=t,_&&_!==this.userId&&(o[N.HD_ATTRIBUTES][N.ATT_BENEFICIARY_ID_NAM]=_),r&&(o[N.HD_ATTRIBUTES][N.ATT_PRIORITY_NAM]=r),n&&(o[N.HD_ATTRIBUTES][N.ATT_PARTICIPANT_PROVIDED_INFO_NAM]=n),this.validatePacket(o)},r.prototype.createReleaseFloor=function(e,t){var _=this.createHeader(N.PRI_FL_RELEASE_NAM,e);return _[N.HD_ATTRIBUTES][N.ATT_FL_REQUEST_ID_NAM]=t,this.validatePacket(_)},r.prototype.createChairAction=function(e,t){var _=this.createHeader(N.PRI_CH_ACTION_NAM,e);return _[N.HD_ATTRIBUTES][N.ATT_FLOOR_REQUEST_INFORMATION_NAM]=t,this.validatePacket(_)},r.prototype.createQueryFloor=function(e,t){var _=this.createHeader(N.PRI_FL_QUERY_NAM,e);return _[N.HD_ATTRIBUTES][N.ATT_FL_ID_NAM]=t,this.validatePacket(_)},r.prototype.createQueryFloorRequest=function(e,t){var _=this.createHeader(N.PRI_FL_REQUEST_QUERY_NAM,e);return _[N.HD_ATTRIBUTES][N.ATT_FL_REQUEST_ID_NAM]=t,this.validatePacket(_)},r.prototype.createQueryUser=function(e,t){var _=this.createHeader(N.PRI_FL_USER_QUERY_NAM,e);return t&&(_[N.HD_ATTRIBUTES][N.ATT_BENEFICIARY_ID_NAM]=t),this.validatePacket(_)},r.prototype.createHello=function(e){var t=this.createHeader(N.PRI_HELLO_NAM,e);return this.validatePacket(t)}},{"./Exceptions":1,debug:14}],7:[function(e,t,_){function r(e,t,_,r){T.call(this);var n=this;this.userId=t,this.conferenceId=e,this.floorList=r,this.transactionMap={},this.floorRequestMap={},this.floorQuery=null,this.messageFactory=new i(this.userId,this.conferenceId),this.transport=new A(this.messageFactory,_),this.closed=!1,this.transport.on("connected",function(){n.queryFloor(r),n.emit("connected")}),this.transport.on("reconnect",function(){n.queryFloor(r),n.emit("connected")}),this.transport.on("disconnected",function(e){n.emit("disconnected",e)}),this.transport.on("response",function(e){n.manageResponse(e)}),this.transport.on("notification",function(e){n.manageNotification(e)})}t.exports=r;var n=e("debug")("JsFCP:Participant"),o=e("debug")("JsFCP:ERROR:Participant");o.log=console.warn.bind(console);var s=e("util"),T=e("events").EventEmitter,i=e("./MessageFactory"),A=e("./Transport"),R=e("./FloorRequest"),a=e("./FloorRelease"),E=e("./FloorQuery");s.inherits(r,T),r.prototype.isWebSocketReady=function(){return this.transport.isWebSocketReady()},r.prototype.manageResponse=function(e){var t=e[i.C.HD_TRANSACTION_ID];if(this.transactionMap.hasOwnProperty(t)){var _=this.transactionMap[t];delete this.transactionMap[t];var r=e[i.C.HD_PRIMITIVE];r===i.C.PRI_ERROR_NAM?_.onErrorReceived(e):_ instanceof R?_.onMessageReceived(e)===!0&&(this.floorRequestMap[_.floorRequestId]=_):_ instanceof a?this.floorRequestMap.hasOwnProperty(_.floorRequestId)&&this.manageNotification(e):_ instanceof E?_.onMessageReceived(e):n("manageResponse(): FloorRequest/FloorRelease was expected")}else n("manageResponse(): not a response, ignored")},r.prototype.manageNotification=function(e){var t=e[i.C.HD_PRIMITIVE];if(t===i.C.PRI_FL_REQUEST_STATUS_NAM){var _=e[i.C.HD_ATTRIBUTES][i.C.ATT_FLOOR_REQUEST_INFORMATION_NAM][i.C.ATT_FL_REQUEST_ID_NAM];if(this.floorRequestMap.hasOwnProperty(_)){var r=this.floorRequestMap[_];r.onMessageReceived(e)===!1&&delete this.floorRequestMap[_]}}else t===i.C.PRI_FL_STATUS_NAM&&this.floorQuery&&this.floorQuery.onMessageReceived(e)},r.prototype.requestFloor=function(e,t,_,r,o){if(n("requestFloor() | floorIds: %o",t),!Array.isArray(t)||0===t.length)throw new TypeError("pArrayFloorIds must be an array with at least one element");var s=Math.floor(1e4*Math.random());_||(_=this.userId);var T=new R(e,_);this.transactionMap[s]=T;var i=this.messageFactory.createRequestFloor(s,t,_,r,o);return this.transport.send(i),T},r.prototype.release=function(e,t){n("release() | floorRequest: %o",t);var _=null;if(_=t instanceof R?t.floorRequestId:parseInt(t),null!==_&&_!==Number.NaN){var r=Math.floor(1e4*Math.random()),o=new a(e,_,this.userId);this.transactionMap[r]=o;var s=this.messageFactory.createReleaseFloor(r,_);this.transport.send(s)}},r.prototype.queryFloor=function(e){n("queryFloor() | floorIds: %o",e);var t=this;if(e.length>0){var _=Math.floor(1e4*Math.random()),r=new E(e);this.transactionMap[_]=r,this.floorQuery=r,r.on("floorGranted",function(e){t.emit("floorGranted",e)}),r.on("floorReleased",function(e){t.emit("floorReleased",e)});var o=this.messageFactory.createQueryFloor(_,e);this.transport.send(o)}},r.prototype.close=function(){n("close()"),this.closed||this.transport.close()}},{"./FloorQuery":2,"./FloorRelease":3,"./FloorRequest":4,"./MessageFactory":6,"./Transport":8,debug:14,events:9,util:13}],8:[function(e,t,_){function r(e,t){n("new | uri: %s",t),T.call(this);var _=this;this.closed=!1;try{this.ws=new R(t),this.ws.onopen=function(){_.emit("connected")},this.ws.onreconnect=function(){_.emit("connected")},this.ws.onmessage=function(e){_.onReceive(e)},this.ws.onclose=function(){_.emit("disconnected",_.closed)},this.ws.onerror=function(){o("WebSocket error")},this.messageFactory=e}catch(r){throw o("new | error thrown: %o",r),new A.NoWebSocketException}}t.exports=r;var n=e("debug")("JsFCP:Transport"),o=e("debug")("JsFCP:ERROR:Transport");o.log=console.warn.bind(console);var s=e("util"),T=e("events").EventEmitter,i=e("./MessageFactory"),A=e("./Exceptions"),R=e("websocketwrapper");s.inherits(r,T),r.prototype.isWebSocketReady=function(){return this.ws&&this.ws.readyState===this.ws.OPEN},r.prototype.send=function(e){var t=JSON.stringify(e);if(!this.isWebSocketReady())throw new A.NoWebSocketException;this.ws.send(t)},r.prototype.onReceive=function(e){var t;try{t=JSON.parse(e.data)}catch(_){return void n("onReceive() | received msg is not valid JSON")}n("onReceive() | json: %o",t);try{if(this.messageFactory.isValidHeaderFormat(t),!this.messageFactory.isMine(t))return;if(this.messageFactory.checkValidMessageFormat(t)){var r=t[i.C.HD_TRANSACTION_ID];0===r?this.emit("notification",t):this.emit("response",t)}}catch(_){throw _}},r.prototype.close=function(){this.closed=!0;try{this.ws.close()}catch(e){}}},{"./Exceptions":1,"./MessageFactory":6,debug:14,events:9,util:13,websocketwrapper:17}],9:[function(e,t,_){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function T(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,_,r,o,i,A;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(_=this._events[e],T(_))return!1;if(n(_))switch(arguments.length){case 1:_.call(this);break;case 2:_.call(this,arguments[1]);break;case 3:_.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),i=1;r>i;i++)o[i-1]=arguments[i];_.apply(this,o)}else if(s(_)){for(r=arguments.length,o=new Array(r-1),i=1;r>i;i++)o[i-1]=arguments[i];for(A=_.slice(),r=A.length,i=0;r>i;i++)A[i].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var _;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var _;_=T(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,_&&_>0&&this._events[e].length>_&&(this._events[e].warned=!0,
console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function _(){this.removeListener(e,_),r||(r=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var r=!1;return _.listener=t,this.on(e,_),this},r.prototype.removeListener=function(e,t){var _,r,o,T;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(_=this._events[e],o=_.length,r=-1,_===t||n(_.listener)&&_.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(_)){for(T=o;T-->0;)if(_[T]===t||_[T].listener&&_[T].listener===t){r=T;break}if(0>r)return this;1===_.length?(_.length=0,delete this._events[e]):_.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,_;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(_=this._events[e],n(_))this.removeListener(e,_);else for(;_.length;)this.removeListener(e,_[_.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var _;return _=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],10:[function(e,t,_){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var _=function(){};_.prototype=t.prototype,e.prototype=new _,e.prototype.constructor=e}},{}],11:[function(e,t,_){function r(){if(!T){T=!0;for(var e,t=s.length;t;){e=s,s=[];for(var _=-1;++_<t;)e[_]();t=s.length}T=!1}}function n(){}var o=t.exports={},s=[],T=!1;o.nextTick=function(e){s.push(e),T||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],12:[function(e,t,_){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],13:[function(e,t,_){(function(t,r){function n(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),I(t)?r.showHidden=t:t&&_._extend(r,t),O(r.showHidden)&&(r.showHidden=!1),O(r.depth)&&(r.depth=2),O(r.colors)&&(r.colors=!1),O(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),i(r,e,r.depth)}function o(e,t){var _=n.styles[t];return _?"["+n.colors[_][0]+"m"+e+"["+n.colors[_][1]+"m":e}function s(e,t){return e}function T(e){var t={};return e.forEach(function(e,_){t[e]=!0}),t}function i(e,t,r){if(e.customInspect&&t&&F(t.inspect)&&t.inspect!==_.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return f(n)||(n=i(e,n,r)),n}var o=A(e,t);if(o)return o;var s=Object.keys(t),I=T(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),L(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return R(t);if(0===s.length){if(F(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(h(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(d(t))return e.stylize(Date.prototype.toString.call(t),"date");if(L(t))return R(t)}var l="",M=!1,S=["{","}"];if(c(t)&&(M=!0,S=["[","]"]),F(t)){var O=t.name?": "+t.name:"";l=" [Function"+O+"]"}if(h(t)&&(l=" "+RegExp.prototype.toString.call(t)),d(t)&&(l=" "+Date.prototype.toUTCString.call(t)),L(t)&&(l=" "+R(t)),0===s.length&&(!M||0==t.length))return S[0]+l+S[1];if(0>r)return h(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var p;return p=M?a(e,t,r,I,s):s.map(function(_){return E(e,t,r,I,_,M)}),e.seen.pop(),N(p,l,S)}function A(e,t){if(O(t))return e.stylize("undefined","undefined");if(f(t)){var _="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(_,"string")}return M(t)?e.stylize(""+t,"number"):I(t)?e.stylize(""+t,"boolean"):u(t)?e.stylize("null","null"):void 0}function R(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,_,r,n){for(var o=[],s=0,T=t.length;T>s;++s)o.push(C(t,String(s))?E(e,t,_,r,String(s),!0):"");return n.forEach(function(n){n.match(/^\d+$/)||o.push(E(e,t,_,r,n,!0))}),o}function E(e,t,_,r,n,o){var s,T,A;if(A=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},A.get?T=A.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):A.set&&(T=e.stylize("[Setter]","special")),C(r,n)||(s="["+n+"]"),T||(e.seen.indexOf(A.value)<0?(T=u(_)?i(e,A.value,null):i(e,A.value,_-1),T.indexOf("\n")>-1&&(T=o?T.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+T.split("\n").map(function(e){return"   "+e}).join("\n"))):T=e.stylize("[Circular]","special")),O(s)){if(o&&n.match(/^\d+$/))return T;s=JSON.stringify(""+n),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+T}function N(e,t,_){var r=0,n=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?_[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+_[1]:_[0]+t+" "+e.join(", ")+" "+_[1]}function c(e){return Array.isArray(e)}function I(e){return"boolean"==typeof e}function u(e){return null===e}function l(e){return null==e}function M(e){return"number"==typeof e}function f(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function O(e){return void 0===e}function h(e){return p(e)&&"[object RegExp]"===P(e)}function p(e){return"object"==typeof e&&null!==e}function d(e){return p(e)&&"[object Date]"===P(e)}function L(e){return p(e)&&("[object Error]"===P(e)||e instanceof Error)}function F(e){return"function"==typeof e}function U(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function P(e){return Object.prototype.toString.call(e)}function g(e){return 10>e?"0"+e.toString(10):e.toString(10)}function v(){var e=new Date,t=[g(e.getHours()),g(e.getMinutes()),g(e.getSeconds())].join(":");return[e.getDate(),b[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var y=/%[sdj%]/g;_.format=function(e){if(!f(e)){for(var t=[],_=0;_<arguments.length;_++)t.push(n(arguments[_]));return t.join(" ")}for(var _=1,r=arguments,o=r.length,s=String(e).replace(y,function(e){if("%%"===e)return"%";if(_>=o)return e;switch(e){case"%s":return String(r[_++]);case"%d":return Number(r[_++]);case"%j":try{return JSON.stringify(r[_++])}catch(t){return"[Circular]"}default:return e}}),T=r[_];o>_;T=r[++_])s+=u(T)||!p(T)?" "+T:" "+n(T);return s},_.deprecate=function(e,n){function o(){if(!s){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),s=!0}return e.apply(this,arguments)}if(O(r.process))return function(){return _.deprecate(e,n).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var m,D={};_.debuglog=function(e){if(O(m)&&(m=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(m)){var r=t.pid;D[e]=function(){var t=_.format.apply(_,arguments);console.error("%s %d: %s",e,r,t)}}else D[e]=function(){};return D[e]},_.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},_.isArray=c,_.isBoolean=I,_.isNull=u,_.isNullOrUndefined=l,_.isNumber=M,_.isString=f,_.isSymbol=S,_.isUndefined=O,_.isRegExp=h,_.isObject=p,_.isDate=d,_.isError=L,_.isFunction=F,_.isPrimitive=U,_.isBuffer=e("./support/isBuffer");var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];_.log=function(){console.log("%s - %s",v(),_.format.apply(_,arguments))},_.inherits=e("inherits"),_._extend=function(e,t){if(!t||!p(t))return e;for(var _=Object.keys(t),r=_.length;r--;)e[_[r]]=t[_[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":12,_process:11,inherits:10}],14:[function(e,t,_){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function n(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+_.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var n=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))}),e.splice(o,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?_.storage.removeItem("debug"):_.storage.debug=e}catch(t){}}function T(){var e;try{e=_.storage.debug}catch(t){}return e}function i(){try{return window.localStorage}catch(e){}}_=t.exports=e("./debug"),_.log=o,_.formatArgs=n,_.save=s,_.load=T,_.useColors=r,_.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),_.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],_.formatters.j=function(e){return JSON.stringify(e)},_.enable(T())},{"./debug":15}],15:[function(e,t,_){function r(){return _.colors[R++%_.colors.length]}function n(e){function t(){}function n(){var e=n,t=+new Date,o=t-(A||t);e.diff=o,e.prev=A,e.curr=t,A=t,null==e.useColors&&(e.useColors=_.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=_.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var T=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;T++;var n=_.formatters[r];if("function"==typeof n){var o=s[T];t=n.call(e,o),s.splice(T,1),T--}return t}),"function"==typeof _.formatArgs&&(s=_.formatArgs.apply(e,s));var i=n.log||_.log||console.log.bind(console);i.apply(e,s)}t.enabled=!1,n.enabled=!0;var o=_.enabled(e)?n:t;return o.namespace=e,o}function o(e){_.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,n=0;r>n;n++)t[n]&&(e=t[n].replace(/\*/g,".*?"),"-"===e[0]?_.skips.push(new RegExp("^"+e.substr(1)+"$")):_.names.push(new RegExp("^"+e+"$")))}function s(){_.enable("")}function T(e){var t,r;for(t=0,r=_.skips.length;r>t;t++)if(_.skips[t].test(e))return!1;for(t=0,r=_.names.length;r>t;t++)if(_.names[t].test(e))return!0;return!1}function i(e){return e instanceof Error?e.stack||e.message:e}_=t.exports=n,_.coerce=i,_.disable=s,_.enable=o,_.enabled=T,_.humanize=e("ms"),_.names=[],_.skips=[],_.formatters={};var A,R=0},{ms:16}],16:[function(e,t,_){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var _=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return _*a;case"days":case"day":case"d":return _*R;case"hours":case"hour":case"hrs":case"hr":case"h":return _*A;case"minutes":case"minute":case"mins":case"min":case"m":return _*i;case"seconds":case"second":case"secs":case"sec":case"s":return _*T;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _}}}}function n(e){return e>=R?Math.round(e/R)+"d":e>=A?Math.round(e/A)+"h":e>=i?Math.round(e/i)+"m":e>=T?Math.round(e/T)+"s":e+"ms"}function o(e){return s(e,R,"day")||s(e,A,"hour")||s(e,i,"minute")||s(e,T,"second")||e+" ms"}function s(e,t,_){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+_:Math.ceil(e/t)+" "+_+"s"}var T=1e3,i=60*T,A=60*i,R=24*A,a=365.25*R;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):n(e)}},{}],17:[function(e,t,_){function r(){o('new() | [url:"%s", protocol:%s]',arguments[0],arguments[1]),i.EventTarget.call(this),this.args=arguments,this._ws=null,n.apply(this,this.args),this._closed=!1,this._hasError=!1,this._isReconnecting=!1,this._reconnectionTimer=null,this._reconnectionDelay=5e3}function n(e,t,_,r,s,A){var R=this;this._ws=new T(e,t,_,r,s,A),this._ws.onopen=function(e){R._isReconnecting?R.onreconnect||R._listeners.reconnect?(o('reconnected, firing "reconnect"'),R.dispatchEvent(new i.Event("reconnect"))):(o('reconnected, firing "open"'),R.dispatchEvent(e)):(o('firing "open"'),R.dispatchEvent(e))},this._ws.onerror=function(e){o('firing "error"'),R._hasError=!0,R.dispatchEvent(e)},this._ws.onclose=function(e){o('firing "close" | [code:%s, reason:"%s", wasClean:%s]',e.code,e.reason,e.wasClean);try{R.dispatchEvent(e)}catch(t){}R._closed||R._hasError||(R._hasError=!1,R._reconnectionDelay&&(o("will try to reconnect in %s ms",R._reconnectionDelay),R._reconnectionTimer=setTimeout(function(){o("reconnecting ..."),R._isReconnecting=!0,n.apply(R,R.args)},R._reconnectionDelay)))},this._ws.onmessage=function(e){R.dispatchEvent(e)},this._binaryType&&(this._ws.binaryType=this._binaryType)}t.exports=r;var o=e("debug")("WebSocketWrapper"),s=e("debug")("WebSocketWrapper:ERROR"),T=e("websocket").w3cwebsocket,i=e("yaeti");s.log=console.warn.bind(console),Object.defineProperties(r.prototype,{url:{get:function(){return this._ws.url}},readyState:{get:function(){return this._ws.readyState}},protocol:{get:function(){return this._ws.protocol}},extensions:{get:function(){return this._ws.extensions}},bufferedAmount:{get:function(){return this._ws.bufferedAmount}},CONNECTING:{get:function(){return this._ws.CONNECTING}},OPEN:{get:function(){return this._ws.OPEN}},CLOSING:{get:function(){return this._ws.CLOSING}},CLOSED:{get:function(){return this._ws.CLOSED}},binaryType:{get:function(){return this._ws.binaryType},set:function(e){this._binaryType=e,this._ws.binaryType=e}},reconnectionDelay:{get:function(){return this._reconnectionDelay},set:function(e){this._reconnectionDelay=e}}}),r.prototype.send=function(e){this._ws.send(e)},r.prototype.close=function(e,t){if(!this._closed){o("close() | [code:%s, reason:%s]",e,t),this._closed=!0,clearTimeout(this._reconnectionTimer);try{this._ws.close(e||1e3,t||"user closure")}finally{this._ws=null}}}},{debug:14,websocket:18,yaeti:21}],18:[function(e,t,_){function r(e,t){var _;return _=t?new o(e,t):new o(e)}var n=function(){return this}(),o=n.WebSocket||n.MozWebSocket;t.exports={w3cwebsocket:o?r:null,version:e("./version")}},{"./version":19}],19:[function(e,t,_){t.exports=e("../package.json").version},{"../package.json":20}],20:[function(e,t,_){t.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},version:"1.0.19",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.8.0"},dependencies:{debug:"~2.1.0",nan:"1.8.x","typedarray-to-buffer":"~3.0.0"},devDependencies:{"buffer-equal":"0.0.1",faucet:"0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^1.9.0","jshint-stylish":"^1.0.0",tape:"^3.0.0"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0",gitHead:"da3bd5b04e9442c84881b2e9c13432cdbbae1f16",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},_id:"websocket@1.0.19",_shasum:"e62dbf1a3c5e0767425db7187cfa38f921dfb42c",_from:"websocket@>=1.0.19 <2.0.0",_npmVersion:"2.10.1",_nodeVersion:"0.12.4",_npmUser:{name:"theturtle32",email:"brian@worlize.com"},maintainers:[{name:"theturtle32",email:"brian@worlize.com"}],dist:{shasum:"e62dbf1a3c5e0767425db7187cfa38f921dfb42c",tarball:"http://registry.npmjs.org/websocket/-/websocket-1.0.19.tgz"},_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.19.tgz",readme:"ERROR: No README data found!"}},{}],21:[function(e,t,_){t.exports={EventTarget:e("./lib/EventTarget"),Event:e("./lib/Event")}},{"./lib/Event":22,"./lib/EventTarget":23}],22:[function(e,t,_){(function(e){t.exports=e.Event}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,_){function r(){"function"!=typeof this.addEventListener&&(this._listeners={},this.addEventListener=n,this.removeEventListener=o,this.dispatchEvent=s)}function n(e,t){var _,r,n;if(e&&t){for(_=this._listeners[e],void 0===_&&(this._listeners[e]=_=[]),r=0;n=_[r];r++)if(n===t)return;_.push(t)}}function o(e,t){var _,r,n;if(e&&t&&(_=this._listeners[e],void 0!==_)){for(r=0;n=_[r];r++)if(n===t){_.splice(r,1);break}0===_.length&&delete this._listeners[e]}}function s(e){var t,_,r,n,o,s=!1;if(!e||"string"!=typeof e.type)throw new Error("`event` must have a valid `type` property");if(e._dispatched)throw new Error("event already dispatched");for(e._dispatched=!0,e.cancelable=!0,e.target=this,e.stopImmediatePropagation=function(){s=!0},t=e.type,_=this._listeners[t]||[],r=this["on"+t],"function"==typeof r&&_.push(r),n=0;(o=_[n])&&!s;n++)o.call(this,e);return!e.defaultPrevented}t.exports=r,Object.defineProperties(r.prototype,{listeners:{get:function(){return this._listeners}}})},{}]},{},[5])(5)});